import requests
import tools.chatvolt as chatvolt
from ai import General
from bs4 import BeautifulSoup
import time

def get_newsletter_links():
    newsletter_links = "https://maplebear.activehosted.com/index.php?action=social&chash=2df45244f09369e16ea3f9117ca45157.2508&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=f93882cbd8fc7fb794c1011d63be6fb6.2527&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=fb508ef074ee78a0e58c68be06d8a2eb.2634,https://maplebear.activehosted.com/index.php?action=social&chash=a0833c8a1817526ac555f8d67727caf6.2506&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=4476b929e30dd0c4e8bdbcc82c6ba23a.2542&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=bcc0d400288793e8bdcd7c19a8ac0c2b.2615&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=b8c27b7a1c450ffdacb31483454e0b54.2629&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=6f3e29a35278d71c7f65495871231324.2507&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=7bb060764a818184ebb1cc0d43d382aa.2544&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=0e55666a4ad822e0e34299df3591d979.2613&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=af4732711661056eadbf798ba191272a.2628&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=996009f2374006606f4c0b0fda878af1.2512&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=3e313b9badf12632cdae5452d20e1af6.2620&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=980ecd059122ce2e50136bda65c25e07.2630&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=d82118376df344b0010f53909b961db3.2673&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=731c83db8d2ff01bdc000083fd3c3740.2081&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=d91d1b4d82419de8a614abce9cc0e6d4.2087&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=4e2545f819e67f0615003dd7e04a6087.2115&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=e58cc5ca94270acaceed13bc82dfedf7.2138&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=c6036a69be21cb660499b75718a3ef24.2177&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=2b38c2df6a49b97f706ec9148ce48d86.2231&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=a3fb4fbf9a6f9cf09166aa9c20cbc1ad.2262&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=97af4fb322bb5c8973ade16764156bed.2301&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=160c88652d47d0be60bfbfed25111412.2309&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=a42a596fc71e17828440030074d15e74.2314&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=4d2e7bd33c475784381a64e43e50922f.2320&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=fb2fcd534b0ff3bbed73cc51df620323.2335&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=7e7e69ea3384874304911625ac34321c.2347&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=a4d2f0d23dcc84ce983ff9157f8b7f88.2357&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=1d72310edc006dadf2190caad5802983.2368&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=4122cb13c7a474c1976c9706ae36521d.2381&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=a9078e8653368c9c291ae2f8b74012e7.2397&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=905056c1ac1dad141560467e0a99e1cf.2406&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=884ce4bb65d328ecb03c598409e2b168.2415&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=68a83eeb494a308fe5295da69428a507.2420&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=7810ccd41bf26faaa2c4e1f20db70a71.2439&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=ab1a4d0dd4d48a2ba1077c4494791306.2452&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=0829424ffa0d3a2547b6c9622c77de03.2476&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=522a9ae9a99880d39e5daec35375e999.2079&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=e5e63da79fcd2bebbd7cb8bf1c1d0274.2084&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=db2b4182156b2f1f817860ac9f409ad7.2116&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=c9f95a0a5af052bffce5c89917335f67.2137&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=571e0f7e2d992e738adff8b1bd43a521.2199&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=f197002b9a0853eca5e046d9ca4663d5.2232&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=0f2c9a93eea6f38fabb3acb1c31488c6.2263&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=0e095e054ee94774d6a496099eb1cf6a.2300&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=52292e0c763fd027c6eba6b8f494d2eb.2311&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=0188e8b8b014829e2fa0f430f0a95961.2315&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=fe2d010308a6b3799a3d9c728ee74244.2321&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=4e4e53aa080247bc31d0eb4e7aeb07a0.2338&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=285ab9448d2751ee57ece7f762c39095.2349&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=6a61d423d02a1c56250dc23ae7ff12f3.2362&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=43cca4b3de2097b9558efefd0ecc3588.2370&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=6c14da109e294d1e8155be8aa4b1ce8e.2382&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=1c65cef3dfd1e00c0b03923a1c591db4.2398&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=39e4973ba3321b80f37d9b55f63ed8b8.2408&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=b495ce63ede0f4efc9eec62cb947c162.2414&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=f4573fc71c731d5c362f0d7860945b88.2421&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=c850371fda6892fbfd1c5a5b457e5777.2437&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=da11e8cd1811acb79ccf0fd62cd58f86.2454&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=459a4ddcb586f24efd9395aa7662bc7c.2479&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=43baa6762fa81bb43b39c62553b2970d.2080&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=9f36407ead0629fc166f14dde7970f68.2085&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=d6723e7cd6735df68d1ce4c704c29a04.2114&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=af21d0c97db2e27e13572cbf59eb343d.2136&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=55b1927fdafef39c48e5b73b5d61ea60.2234&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=f47330643ae134ca204bf6b2481fec47.2299&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=82c2559140b95ccda9c6ca4a8b981f1e.2307&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=9adeb82fffb5444e81fa0ce8ad8afe7a.2316&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=7501e5d4da87ac39d782741cd794002d.2322&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=144a3f71a03ab7c4f46f9656608efdb2.2337&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=f7cade80b7cc92b991cf4d2806d6bd78.2348&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=3948ead63a9f2944218de038d8934305.2361&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=68d13cf26c4b4f4f932e3eff990093ba.2371&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=310ce61c90f3a46e340ee8257bc70e93.2380&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=b3ba8f1bee1238a2f37603d90b58898d.2396&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=e6d8545daa42d5ced125a4bf747b3688.2407&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=a284df1155ec3e67286080500df36a9a.2413&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=cd758e8f59dfdf06a852adad277986ca.2418&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=c1e39d912d21c91dce811d6da9929ae8.2438&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=d759175de8ea5b1d9a2660e45554894f.2451&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=0e9fa1f3e9e66792401a6972d477dcc3.2475&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=36a16a2505369e0c922b6ea7a23a56d2.2082&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=a26398dca6f47b49876cbaffbc9954f9.2088&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=a5e0ff62be0b08456fc7f1e88812af3d.2117&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=9c3b1830513cc3b8fc4b76635d32e692.2154&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=c3e0c62ee91db8dc7382bde7419bb573.2211&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=e8b1cbd05f6e6a358a81dee52493dd06.2235&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=83f97f4825290be4cb794ec6a234595f.2292&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=2b6d65b9a9445c4271ab9076ead5605a.2303&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=9a3d458322d70046f63dfd8b0153ece4.2312&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=ae5e3ce40e0404a45ecacaaf05e5f735.2317&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=147702db07145348245dc5a2f2fe5683.2323&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=a58149d355f02887dfbe55ebb2b64ba3.2344&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=a01610228fe998f515a72dd730294d87.2350&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=2715518c875999308842e3455eda2fe3.2364&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=25df35de87aa441b88f22a6c2a830a17.2374&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=e034fb6b66aacc1d48f445ddfb08da98.2388&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=2de5d16682c3c35007e4e92982f1a2ba.2399&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=838e8afb1ca34354ac209f53d90c3a43.2411&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=e3251075554389fe91d17a794861d47b.2417&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=dc4c44f624d600aa568390f1f1104aa0.2423&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=e702e51da2c0f5be4dd354bb3e295d37.2441&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=4079016d940210b4ae9ae7d41c4a2065.2471&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=dc87c13749315c7217cdc4ac692e704c.2482&s=7616ca10a4fbf3742a401b20676b92d4,https://maplebear.activehosted.com/index.php?action=social&chash=31857b449c407203749ae32dd0e7d64a.2053&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=d8700cbd38cc9f30cecb34f0c195b137.2028,https://maplebear.activehosted.com/index.php?action=social&chash=20b5e1cf8694af7a3c1ba4a87f073021.2002&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=6d70cb65d15211726dcce4c0e971e21c.1973&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=afdec7005cc9f14302cd0474fd0f3c96.1954&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=82b8a3434904411a9fdc43ca87cee70c.1942&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=08fe2621d8e716b02ec0da35256a998d.1918&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=31b3b31a1c2f8a370206f111127c0dbd.1907&s=6bf9c068e5891b0ed9bce6afc67fde68,https://maplebear.activehosted.com/index.php?action=social&chash=2387337ba1e0b0249ba90f55b2ba2521.1884&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=b706835de79a2b4e80506f582af3676a.1867&s=6bf9c068e5891b0ed9bce6afc67fde68,https://maplebear.activehosted.com/index.php?action=social&chash=860320be12a1c050cd7731794e231bd3.1856&s=6bf9c068e5891b0ed9bce6afc67fde68,https://maplebear.activehosted.com/index.php?action=social&chash=fe7ee8fc1959cc7214fa21c4840dff0a.1850&s=6bf9c068e5891b0ed9bce6afc67fde68,https://maplebear.activehosted.com/index.php?action=social&chash=2ab56412b1163ee131e1246da0955bd1.1838&s=6bf9c068e5891b0ed9bce6afc67fde68,https://maplebear.activehosted.com/index.php?action=social&chash=6602294be910b1e3c4571bd98c4d5484.1827&s=6bf9c068e5891b0ed9bce6afc67fde68,https://maplebear.activehosted.com/index.php?action=social&chash=437d7d1d97917cd627a34a6a0fb41136.1810,https://maplebear.activehosted.com/index.php?action=social&chash=2f885d0fbe2e131bfc9d98363e55d1d4.1780&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=d2ed45a52bc0edfa11c2064e9edee8bf.1769&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=7fa732b517cbed14a48843d74526c11a.1750,https://maplebear.activehosted.com/index.php?action=social&chash=e205ee2a5de471a70c1fd1b46033a75f.1728,https://maplebear.activehosted.com/index.php?action=social&chash=f47d0ad31c4c49061b9e505593e3db98.1722&s=6bf9c068e5891b0ed9bce6afc67fde68,https://maplebear.activehosted.com/index.php?action=social&chash=20aee3a5f4643755a79ee5f6a73050ac.1704&s=6bf9c068e5891b0ed9bce6afc67fde68,https://maplebear.activehosted.com/index.php?action=social&chash=49c9adb18e44be0711a94e827042f630.1644&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=2a084e55c87b1ebcdaad1f62fdbbac8e.1615&s=c89698f0b42d63396d04560e303dc577,https://maplebear.activehosted.com/index.php?action=social&chash=53adaf494dc89ef7196d73636eb2451b.2054&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=4ca82782c5372a547c104929f03fe7a9.2027,https://maplebear.activehosted.com/index.php?action=social&chash=58c54802a9fb9526cd0923353a34a7ae.2004&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=27ed0fb950b856b06e1273989422e7d3.1974&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=bdb106a0560c4e46ccc488ef010af787.1959&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=24146db4eb48c718b84cae0a0799dcfc.1943&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=03e0704b5690a2dee1861dc3ad3316c9.1921&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=1e48c4420b7073bc11916c6c1de226bb.1908&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=9246444d94f081e3549803b928260f56.1885&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=b8c37e33defde51cf91e1e03e51657da.1871&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=934815ad542a4a7c5e8a2dfa04fea9f5.1858&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=9908279ebbf1f9b250ba689db6a0222b.1852&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=287e03db1d99e0ec2edb90d079e142f3.1841&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=c22abfa379f38b5b0411bc11fa9bf92f.1828&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=5c936263f3428a40227908d5a3847c0b.1812&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=b55ec28c52d5f6205684a473a2193564.1779&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=043c3d7e489c69b48737cc0c92d0f3a2.1770&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=bea5955b308361a1b07bc55042e25e54.1749&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=2a9d121cd9c3a1832bb6d2cc6bd7a8a7.1731&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=f57a2f557b098c43f11ab969efe1504b.1723&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=061412e4a03c02f9902576ec55ebbe77.1705&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=352407221afb776e3143e8a1a0577885.1662&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=5ec91aac30eae62f4140325d09b9afd0.1625,https://maplebear.activehosted.com/index.php?action=social&chash=43dd49b4fdb9bede653e94468ff8df1e.2052&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=7cce53cf90577442771720a370c3c723.2003&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=537d9b6c927223c796cac288cced29df.1978&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=e17184bcb70dcf3942c54e0b537ffc6d.1958&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=021bbc7ee20b71134d53e20206bd6feb.1941&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=65cc2c8205a05d7379fa3a6386f710e1.1922&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=7f975a56c761db6506eca0b37ce6ec87.1909&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=d7322ed717dedf1eb4e6e52a37ea7bcd.1892&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=fba9d88164f3e2d9109ee770223212a0.1872&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=7b13b2203029ed80337f27127a9f1d28.1857&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=df6d2338b2b8fce1ec2f6dda0a630eb0.1851&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=d79aac075930c83c2f1e369a511148fe.1840,https://maplebear.activehosted.com/index.php?action=social&chash=ca75910166da03ff9d4655a0338e6b09.1829&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=d707329bece455a462b58ce00d1194c9.1811&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=3df1d4b96d8976ff5986393e8767f5b2.1776&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=9f53d83ec0691550f7d2507d57f4f5a2.1768&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=c4015b7f368e6b4871809f49debe0579.1748&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=621461af90cadfdaf0e8d4cc25129f91.1725&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=aa169b49b583a2b5af89203c2b78c67c.1721&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=4b0250793549726d5c1ea3906726ebfe.1703&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=dd8eb9f23fbd362da0e3f4e70b878c16.1665&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=19b650660b253761af189682e03501dd.1626&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=cd89fef7ffdd490db800357f47722b20.2041&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=5055cbf43fac3f7e2336b27310f0b9ef.2005&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=9ac403da7947a183884c18a67d3aa8de.1988,https://maplebear.activehosted.com/index.php?action=social&chash=a34bacf839b923770b2c360eefa26748.1960&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=3806734b256c27e41ec2c6bffa26d9e7.1948&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=93d65641ff3f1586614cf2c1ad240b6c.1927&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=f33ba15effa5c10e873bf3842afb46a6.1910&s=6bf9c068e5891b0ed9bce6afc67fde68,https://maplebear.activehosted.com/index.php?action=social&chash=1587965fb4d4b5afe8428a4a024feb0d.1897&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=aa68c75c4a77c87f97fb686b2f068676.1873,https://maplebear.activehosted.com/index.php?action=social&chash=0b8aff0438617c055eb55f0ba5d226fa.1860&s=6bf9c068e5891b0ed9bce6afc67fde68,https://maplebear.activehosted.com/index.php?action=social&chash=a1140a3d0df1c81e24ae954d935e8926.1853,https://maplebear.activehosted.com/index.php?action=social&chash=fec8d47d412bcbeece3d9128ae855a7a.1842&s=6bf9c068e5891b0ed9bce6afc67fde68,https://maplebear.activehosted.com/index.php?action=social&chash=92977ae4d2ba21425a59afb269c2a14e.1833&s=6bf9c068e5891b0ed9bce6afc67fde68,https://maplebear.activehosted.com/index.php?action=social&chash=1ce927f875864094e3906a4a0b5ece68.1813&s=6bf9c068e5891b0ed9bce6afc67fde68,https://maplebear.activehosted.com/index.php?action=social&chash=92262bf907af914b95a0fc33c3f33bf6.1778,https://maplebear.activehosted.com/index.php?action=social&chash=4daa3db355ef2b0e64b472968cb70f0d.1771&s=6bf9c068e5891b0ed9bce6afc67fde68,https://maplebear.activehosted.com/index.php?action=social&chash=cbb6a3b884f4f88b3a8e3d44c636cbd8.1751,https://maplebear.activehosted.com/index.php?action=social&chash=8b6dd7db9af49e67306feb59a8bdc52c.1726&s=6bf9c068e5891b0ed9bce6afc67fde68,https://maplebear.activehosted.com/index.php?action=social&chash=c8fbbc86abe8bd6a5eb6a3b4d0411301.1724&s=6bf9c068e5891b0ed9bce6afc67fde68,https://maplebear.activehosted.com/index.php?action=social&chash=892c91e0a653ba19df81a90f89d99bcd.1713&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=d516b13671a4179d9b7b458a6ebdeb92.1666&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=1fc214004c9481e4c8073e85323bfd4b.1627&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=a1519de5b5d44b31a01de013b9b51a80.2063&s=6077140ae63adb9da3fc19a124c4d1e6,https://maplebear.activehosted.com/index.php?action=social&chash=1efa39bcaec6f3900149160693694536.1600&s=c89698f0b42d63396d04560e303dc577,https://maplebear.activehosted.com/index.php?action=social&chash=84f7e69969dea92a925508f7c1f9579a.1588&s=7a481402d07099ce53bc4c70e7f9f35b,https://maplebear.activehosted.com/index.php?action=social&chash=ab88b15733f543179858600245108dd8.1570&s=050240e1cc2053b177739f37167b8c1d,https://maplebear.activehosted.com/index.php?action=social&chash=632cee946db83e7a52ce5e8d6f0fed35.1543&s=99528df5df5ebadc98184eb1b13978a4,https://maplebear.activehosted.com/index.php?action=social&chash=a8ecbabae151abacba7dbde04f761c37.1523&s=99528df5df5ebadc98184eb1b13978a4,https://maplebear.activehosted.com/index.php?action=social&chash=1141938ba2c2b13f5505d7c424ebae5f.1517&s=99528df5df5ebadc98184eb1b13978a4,https://maplebear.activehosted.com/index.php?action=social&chash=c15da1f2b5e5ed6e6837a3802f0d1593.1497&s=c785426ca89fd76ecb4c2ce3637e9393,https://maplebear.activehosted.com/index.php?action=social&chash=8c6744c9d42ec2cb9e8885b54ff744d0.1484&s=c89698f0b42d63396d04560e303dc577,https://maplebear.activehosted.com/index.php?action=social&chash=288cc0ff022877bd3df94bc9360b9c5d.1465&s=c89698f0b42d63396d04560e303dc577,https://maplebear.activehosted.com/index.php?action=social&chash=912d2b1c7b2826caf99687388d2e8f7c.1438&s=c0ae8c1456cc5b030abd1d7ef6719ba7,https://maplebear.activehosted.com/index.php?action=social&chash=0537fb40a68c18da59a35c2bfe1ca554.1429&s=c89698f0b42d63396d04560e303dc577,https://maplebear.activehosted.com/index.php?action=social&chash=a5cdd4aa0048b187f7182f1b9ce7a6a7.1418&s=c89698f0b42d63396d04560e303dc577,https://maplebear.activehosted.com/index.php?action=social&chash=7f1171a78ce0780a2142a6eb7bc4f3c8.1400&s=c89698f0b42d63396d04560e303dc577,https://maplebear.activehosted.com/index.php?action=social&chash=8df707a948fac1b4a0f97aa554886ec8.1385&s=c89698f0b42d63396d04560e303dc577,https://maplebear.activehosted.com/index.php?action=social&chash=4a47d2983c8bd392b120b627e0e1cab4.1373&s=c89698f0b42d63396d04560e303dc577,https://maplebear.activehosted.com/index.php?action=social&chash=10a5ab2db37feedfdeaab192ead4ac0e.1359&s=c89698f0b42d63396d04560e303dc577,https://maplebear.activehosted.com/index.php?action=social&chash=556f391937dfd4398cbac35e050a2177.1352&s=c89698f0b42d63396d04560e303dc577,https://maplebear.activehosted.com/index.php?action=social&chash=1595af6435015c77a7149e92a551338e.1347&s=c89698f0b42d63396d04560e303dc577,https://maplebear.activehosted.com/index.php?action=social&chash=1595af6435015c77a7149e92a551338e.1347&s=https://maplebear.activehosted.com/index.php?action=social&chash=2dea61eed4bceec564a00115c4d21334.1334&s=c89698f0b42d63396d04560e303dc577,https://maplebear.activehosted.com/index.php?action=social&chash=192fc044e74dffea144f9ac5dc9f3395.1328&s=c89698f0b42d63396d04560e303dc577,https://maplebear.activehosted.com/index.php?action=social&chash=1595af6435015c77a7149e92a551338e.1347&s=https://maplebear.activehosted.com/index.php?action=social&chash=2dea61eed4bceec564a00115c4d21334.1334&s=https://maplebear.activehosted.com/index.php?action=social&chash=68264bdb65b97eeae6788aa3348e553c.1316&s=20204983ea9e83621b944d67d1d305d3,https://maplebear.activehosted.com/index.php?action=social&chash=aff1621254f7c1be92f64550478c56e6.1603&s=c89698f0b42d63396d04560e303dc577,https://maplebear.activehosted.com/index.php?action=social&chash=e97ee2054defb209c35fe4dc94599061.1586&s=7a481402d07099ce53bc4c70e7f9f35b,https://maplebear.activehosted.com/index.php?action=social&chash=e0ec453e28e061cc58ac43f91dc2f3f0.1555&s=774a2b6e89be232a2595c85e344b458e,https://maplebear.activehosted.com/index.php?action=social&chash=677e09724f0e2df9b6c000b75b5da10d.1544,https://maplebear.activehosted.com/index.php?action=social&chash=96b9bff013acedfb1d140579e2fbeb63.1534&s=99528df5df5ebadc98184eb1b13978a4,https://maplebear.activehosted.com/index.php?action=social&chash=dc5689792e08eb2e219dce49e64c885b.1519&s=99528df5df5ebadc98184eb1b13978a4,https://maplebear.activehosted.com/index.php?action=social&chash=da8ce53cf0240070ce6c69c48cd588ee.1504&s=99528df5df5ebadc98184eb1b13978a4,https://maplebear.activehosted.com/index.php?action=social&chash=22ac3c5a5bf0b520d281c122d1490650.1602&s=c89698f0b42d63396d04560e303dc577,https://maplebear.activehosted.com/index.php?action=social&chash=b86e8d03fe992d1b0e19656875ee557c.1587&s=7a481402d07099ce53bc4c70e7f9f35b,https://maplebear.activehosted.com/index.php?action=social&chash=b0b183c207f46f0cca7dc63b2604f5cc.1571&s=050240e1cc2053b177739f37167b8c1d,https://maplebear.activehosted.com/index.php?action=social&chash=795c7a7a5ec6b460ec00c5841019b9e9.1548,https://maplebear.activehosted.com/index.php?action=social&chash=71ad16ad2c4d81f348082ff6c4b20768.1535&s=99528df5df5ebadc98184eb1b13978a4,https://maplebear.activehosted.com/index.php?action=social&chash=846c260d715e5b854ffad5f70a516c88.1520&s=99528df5df5ebadc98184eb1b13978a4,https://maplebear.activehosted.com/index.php?action=social&chash=82489c9737cc245530c7a6ebef3753ec.1505&s=YnJ1bmFlLnNhbnRvc0BtYXBsZWJlYXIuY29tLmJy,https://maplebear.activehosted.com/index.php?action=social&chash=92fb0c6d1758261f10d052e6e2c1123c.1601&s=c89698f0b42d63396d04560e303dc577,https://maplebear.activehosted.com/index.php?action=social&chash=fe8c15fed5f808006ce95eddb7366e35.1597&s=7a481402d07099ce53bc4c70e7f9f35b,https://maplebear.activehosted.com/index.php?action=social&chash=8f7d807e1f53eff5f9efbe5cb81090fb.1575,https://maplebear.activehosted.com/index.php?action=social&chash=fa3a3c407f82377f55c19c5d403335c7.1549&s=99528df5df5ebadc98184eb1b13978a4,https://maplebear.activehosted.com/index.php?action=social&chash=31839b036f63806cba3f47b93af8ccb5.1537,https://maplebear.activehosted.com/index.php?action=social&chash=d58072be2820e8682c0a27c0518e805e.1521&s=99528df5df5ebadc98184eb1b13978a4,https://maplebear.activehosted.com/index.php?action=social&chash=7c590f01490190db0ed02a5070e20f01.1508&s=99528df5df5ebadc98184eb1b13978a4"
    newsletter_links = newsletter_links.split(",")

    #https://portal-arvore.webflow.io/challenge-maple-bear
    #newsletter_links = ["https://portal-arvore.webflow.io/challenge-maple-bear"]
    
    return newsletter_links

def get_webpage_data(url):
    """
    Extrai o conteúdo de uma URL específica de newsletter
    """
    try:
        print(f"  → Fazendo requisição para: {url}")
        response = requests.get(url, timeout=30)  # Timeout de 30 segundos
        response.raise_for_status()
        print(f"  → Resposta recebida: {response.status_code}")
        
        soup = BeautifulSoup(response.text, "html.parser")
        
        # Extrai textos de <span>, <p> e <div> e concatena tudo
        all_texts = []
        seen_texts = set()
        for tag in soup.find_all(["span", "p", "div"]):
            text = tag.get_text(separator=' ', strip=True)
            if text and text not in seen_texts:
                seen_texts.add(text)
                all_texts.append(text)
        
        # Junta todos os textos em um único documento
        combined_text = " ".join(all_texts)
        combined_text = ' '.join(combined_text.split())
        
        # TESTE: Enviar apenas os primeiros 300 caracteres
        test_content = combined_text[:300] if len(combined_text) > 300 else combined_text
        
        documents = []
        if combined_text:
            documents.append({
                "fields": {
                    "title": url,
                     "content": combined_text,  # COMENTADO: conteúdo completo
                   # "content": test_content,    # TESTE: apenas primeiros 300 caracteres
                    "id": url,
                    "url": url
                }
            })
            print(f"  → Conteúdo extraído: {len(combined_text)} caracteres total")
        else:
            print(f"  → Nenhum conteúdo encontrado")
        
        return documents
        
    except requests.exceptions.RequestException as e:
        print(f"  ❌ Erro ao acessar URL: {e}")
        return []
    except Exception as e:
        print(f"  ❌ Erro inesperado: {e}")
        return []

def main():
    try:
        chatVoltDatas = chatvolt.getAll()
        chatVoltDataSources = chatVoltDatas.get("datasources", {})

        # Obtém todos os links de newsletters
        newsletter_links = get_newsletter_links()
        print(f"Encontrados {len(newsletter_links)} links de newsletters para processar")
        
        success_count = 0
        error_count = 0
        
        for i, url in enumerate(newsletter_links, 1):
            print(f"\n[{i}/{len(newsletter_links)}] Processando: {url}")
            
            try:
                # Extrai o conteúdo de cada newsletter
                webpageDatas = get_webpage_data(url)
                
                if not webpageDatas:
                    print(f"  ⚠️ Nenhum dado extraído para: {url}")
                    error_count += 1
                    continue
                
                for webpageData in webpageDatas:
                    # Adiciona o mbtype para garantir o envio correto
                    webpageFields = dict(webpageData['fields'])
                    webpageFields['mbtype'] = 'webpage'
                  
                    print(f"  → Enviando para ChatVolt...")
                    chatvolt.sendWebpage(webpageFields)
                    print(f"  ✅ Newsletter enviada com sucesso: {url}")
                    success_count += 1
                    
                # Delay de 2 segundos entre cada URL para evitar rate limiting
                print(f"  ⏳ Aguardando 2 segundos antes da próxima requisição...")
                time.sleep(2)
                      
            except Exception as e:
                print(f"  ❌ Erro ao processar {url}: {e}")
                error_count += 1
                # Delay menor em caso de erro
                time.sleep(1)
                continue

        print(f"\n📊 Resumo:")
        print(f"  ✅ Sucessos: {success_count}")
        print(f"  ❌ Erros: {error_count}")
            
    except Exception as e:
        print(f"❌ Erro geral no main: {e}")

if __name__ == '__main__':
    main()